var defer3=function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e){return e&&e["default"]||e}function o(e,t,n,o){function a(e){return i[e]||e}o=o||function(e,t,n,o,a){var i=t.split("\n"),r=Math.max(o-3,0),s=Math.min(i.length,o+3),c=a(n),l=i.slice(r,s).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=c,e.message=(c||"ejs")+":"+o+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,a)};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,s=1,c='<span id="fn-player-messages-unread"><%= data.total %></span>\n',l=void 0;try{var d=[],u=d.push.bind(d);return u('<span id="fn-player-messages-unread">'),u(t(e.total)),u("</span>\n"),s=2,d.join("")}catch(p){o(p,c,l,s,t)}}function a(e,t,n,o){function a(e){return i[e]||e}o=o||function(e,t,n,o,a){var i=t.split("\n"),r=Math.max(o-3,0),s=Math.min(i.length,o+3),c=a(n),l=i.slice(r,s).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=c,e.message=(c||"ejs")+":"+o+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,a)};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,s=1,c='<span id="updates-count"><%= data.count %></span>',l=void 0;try{var d=[],u=d.push.bind(d);return u('<span id="updates-count">'),u(t(e.count)),u("</span>"),d.join("")}catch(p){o(p,c,l,s,t)}}var i='/*  define the sprite map for notifications plugin  */\n#riotbar-notifications {\n  float: left;\n  line-height: 100%;\n  margin-top: 18px;\n  position: relative;\n  text-align: right;\n}\n#riotbar-notifications #riotbar-updates-count,\n#riotbar-notifications #riotbar-notification-count {\n  padding: 0 10px 0 25px;\n  display: none;\n  color: #d3c7a9;\n  height: 16px;\n  line-height: 16px;\n  font-size: 14px;\n  cursor: pointer;\n  background-repeat: no-repeat;\n}\n#riotbar-notifications #riotbar-updates-count {\n  background-image: url(https://cdn.leagueoflegends.com/riotbar/prod/1.6.371/images/notifications/sprites.png);\n  background-position: -28px 0px;\n  width: 18px;\n  height: 16px;\n}\n#riotbar-notifications #riotbar-updates-count.unread {\n  background-image: url(https://cdn.leagueoflegends.com/riotbar/prod/1.6.371/images/notifications/sprites.png);\n  background-position: 0px 0px;\n  width: 18px;\n  height: 16px;\n}\n#riotbar-notifications #riotbar-notification-count {\n  background-image: url(https://cdn.leagueoflegends.com/riotbar/prod/1.6.371/images/notifications/sprites.png);\n  background-position: -26px -26px;\n  width: 16px;\n  height: 16px;\n}\n#riotbar-notifications #riotbar-notification-count.unread {\n  background-image: url(https://cdn.leagueoflegends.com/riotbar/prod/1.6.371/images/notifications/sprites.png);\n  background-position: 0px -26px;\n  width: 16px;\n  height: 16px;\n}\n\nbody .player-messaging {\n  text-align: left;\n}\nbody .player-messaging h1 {\n  font-family: "BeaufortLoL", "Constantia", "Palatino", "Georgia", serif;\n  margin: 0px;\n}\nbody .player-messaging h1 .unread-label {\n  font-weight: normal;\n}\nbody .player-messaging a, body .player-messaging a:visited {\n  color: #94724D;\n}\nbody .player-messaging .message-list li {\n  color: #d3c7a9;\n}',r=Object.freeze({"default":i}),s=t(function(e){var t=e.exports={window:window,deepOverride:function(e,n,o){var a={};void 0===o&&(o=1/0);for(var i in e)if(e.hasOwnProperty(i)){var r=null!==e[i],s="object"==typeof e[i];s=s&&!t.isArray(e[i]),void 0===n?a[i]=e[i]:o>0&&r&&s?a[i]=t.deepOverride(e[i],n[i],o-1):n.hasOwnProperty(i)?void 0!==n[i]&&(a[i]=n[i]):a[i]=e[i]}return a},isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return null!==e},map:function(e,t){if(null!==e)if(Object.keys)for(var n=Object.keys(e),o=n.length,a=0;a<o;a++){var i=n[a];t(i,e[i])}else for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])},nextTick:function(e){setTimeout(e,0)},appendStyles:function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");if(n.type="text/css",t.appendChild(n),n.styleSheet){n.styleSheet.cssText=e;try{n.innerHTML=e}catch(o){}}else n.appendChild(document.createTextNode(e))},appendScript:function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)},ensureScript:function(e,n){var o=n.interval?n.interval:10,a=!1,i=!1,r=function(){for(var s=!0,c=e.split("."),l=window,d=0;s&&d<c.length;d++)s=l.hasOwnProperty?l.hasOwnProperty(c[d]):!!l[c[d]],l=l[c[d]];s?(a=!0,i&&i.call()):(n.url&&(t.appendScript(n.url),delete n.url),setTimeout(r,o))};return r(),{then:function(e){a?e.call():i=e}}},hasClass:function(e,t){var n=" "+e.className+" ",o=" "+t+" ";return n.indexOf(o)>-1},toggleClass:function(e,n,o){var a="boolean"==typeof o?!o:t.hasClass(e,n);a?t.removeClass(e,n):t.addClass(e,n)},addClass:function(e,t){var n=e.className.split(/\s+/);n.indexOf(t)===-1&&(n.splice(n.length,0,t),e.className=n.join(" "))},removeClass:function(e,t){for(var n=e.className.split(/\s+/),o=n.length;o>=0;o--)n[o]===t&&(n.splice(o,1),e.className=n.join(" "))},getCurrentDomain:function(e){var n=t.window.location.hostname,o=/([a-z]+\.[a-z]{2,4}(\.[a-z]{2,4})?)$/i,a=n.match(o);return null!==a?a[1]:e},createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},addEvent:function(e,n,o){e.attachEvent?(e["e"+n+o]=o,e[n+o]=function(){e["e"+n+o](t.window.event)},e.attachEvent("on"+n,e[n+o])):e.addEventListener(n,o,!1)},removeEvent:function(e,t,n){e.detachEvent?(e.detachEvent("on"+t,e[t+n]),e[t+n]=null):e.removeEventListener(t,n,!1)},setCookie:function(e,t,n){e=encodeURIComponent(e),t=encodeURIComponent(t);var o=e+"="+t+";";n=n||{},n.expires&&(o=o+"expires="+n.expires+";"),n.path&&(o=o+"path="+n.path+";"),n.domain&&"localhost"!=n.domain&&(o=o+"domain="+n.domain+";"),n.secure&&(o+="secure;"),document.cookie=o},getCookie:function(e){e=encodeURIComponent(e);var t=new RegExp(e+"=([^;]*)"),n=t.exec(document.cookie);return!!n&&decodeURIComponent(n[1])},delCookie:function(e){t.setCookie(e,"",{expires:"Thu, 01 Jan 1970 00:00:01 GMT"})},createElementFromHTML:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}}}),c=(s.window,s.deepOverride,s.isArray,s.isEmptyObject,s.map,s.nextTick,s.appendStyles,s.appendScript,s.ensureScript,s.hasClass,s.toggleClass,s.addClass,s.removeClass,s.getCurrentDomain,s.createCORSRequest,s.addEvent,s.removeEvent,s.setCookie,s.getCookie,s.delCookie,s.createElementFromHTML,t(function(e){var t=[],n=e.exports={gatherDefaults:function(e,t){return s.map(t,function(n){e[n]=t[n].defaults}),e},getPluginStyles:function(e,t){t.styles&&e.push(t.styles)},addPluginExtensions:function(e,t,n){n.extensions&&(e[t]=n.extensions)},toggleActive:function(e,n){var o={trigger:e,target:n};t.push(o),s.toggleClass(n,"active")},removeActive:function(e){for(var n=e.target||window.event.srcElement,o=0;o<t.length;o++){var a=t[o],i=a.trigger,r=a.target;r.contains(n)||i.contains(n)||(r.className=r.className.replace("active",""),t.splice(o,1),o--)}}};s.addEvent(document.body,"click",n.removeActive)})),l=(c.gatherDefaults,c.getPluginStyles,c.addPluginExtensions,c.toggleActive,c.removeActive,Object.freeze({"default":o})),d=Object.freeze({"default":a}),u=n(l),p=n(d),f=function(e,t){var n={notificationCountTemplate:u,updatesCountTemplate:p,notificationsApolloWidget:!1,fetchNotificationsCount:function(){var o=e.notificationsServiceUrl;o+="messages?read_state=unread&count=true";var a=window.RiotBar.account.getRegion().toUpperCase(),i=a+":"+t.getCookie("PVPNET_TOKEN_"+a);try{var r=new XMLHttpRequest;r.open("GET",o,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-PVPNET",i),r.onreadystatechange=n.handleNotificationsResponse,r.send()}catch(s){}},handleNotificationsResponse:function(){var e=this;if(4===e.readyState)try{var t=JSON.parse(e.responseText);t.hasOwnProperty("total")&&n.renderNotificationsCount(t)}catch(o){}},renderNotificationsCount:function(o){var a=e.notificationsRenderTo;a.innerHTML=n.notificationCountTemplate(o),parseInt(o.total,10)>0&&(a.className="unread");var i=document.getElementById("riotbar-account");a.style.display="table-cell",t.addEvent(a,"click",function(){n.handleNotificationClick(),c.toggleActive(a,i)})},handleNotificationClick:function(){if(n.notificationsApolloWidget===!1){var o=document.createElement("DIV");o.setAttribute("data-apollo-widget","player-messaging"),o.setAttribute("data-show-unread-count","false"),o.setAttribute("data-modal","true"),o.className="modal player-messaging box main";var a=document.createElement("DIV");a.appendChild(o),document.body.appendChild(a),t.ensureScript("jQuery",{url:e.jQueryJS}).then(function(){t.ensureScript("Riot.Apollo",{url:e.apolloWidgetsJS}).then(function(){window.Riot.Apollo.hasOwnProperty("started")?window.Riot.Apollo.attach(a):window.Riot.Apollo.start()})}),n.notificationsApolloWidget=o}else{n.notificationsApolloWidget.style.display="block";var i=document.getElementById("player-messaging-mask");i.style.display="block"}return!1},fetchUpdatesCount:function(){var o=e.apolloServiceUrl,a=window.RiotBar.account.getRegion().toUpperCase(),i=window.RiotBar.account.getPvpnetId();o+="users/updatesCount/"+a+"/"+encodeURIComponent(i)+"/";var r=a+":"+t.getCookie("PVPNET_TOKEN_"+a);try{var s=new XMLHttpRequest;s.open("GET",o,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-PVPNET",r),s.onreadystatechange=n.handleUpdatesResponse,s.send()}catch(c){}},handleUpdatesResponse:function(){var e=this;if(4===e.readyState)try{var t=JSON.parse(e.responseText);t.hasOwnProperty("searchResultsCount")&&n.renderUpdatesCount(t.searchResultsCount)}catch(o){}},renderUpdatesCount:function(t){var o=e.updatesRenderTo,a=e.boardsUrl+"myupdates";o.innerHTML=n.updatesCountTemplate({count:t}),parseInt(t,10)>0&&(o.className="unread"),o.href=a,o.style.display="table-cell"}};return n},m=n(r),g=t(function(e){var t=window.RiotBar.plugins.notificationsDeferred=e.exports={config:{},styles:m,defaults:{},init:function(e,n,o){t.config=e,t.element=document.createElement("div"),t.element.id="riotbar-notifications";var a=document.createElement("a");a.id="riotbar-updates-count",t.element.appendChild(a);var i=document.createElement("div");i.id="riotbar-notification-count",t.element.appendChild(i),t.config.notificationsRenderTo=i,t.config.updatesRenderTo=a,t.utils=f(e,o),e.updatesCountEnabled&&t.utils.fetchUpdatesCount(),t.utils.fetchNotificationsCount(),t.placeElement(n),window.addEventListener("resize",function(){t.placeElement(n)})},placeElement:function(e){if(window.innerWidth>640||!window.RiotBar.config.mobileResponsive)t.element.parentElement!==e.rightBarContent&&e.rightBarContent.insertBefore(t.element,document.getElementById("riotbar-account"));else{var n=document.getElementById("riotbar-account-dropdown-plugins");n?t.element.parentElement!==n&&n.insertBefore(t.element,n.firstChild):t.element.parentElement&&t.element.parentElement.removeChild(t.element)}}}}),h=g.config,v=g.styles,y=g.defaults,C=g.init,b=g.placeElement;return e.config=h,e["default"]=g,e.defaults=y,e.init=C,e.placeElement=b,e.styles=v,e}({});